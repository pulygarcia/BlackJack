!function(){let e=[],t=["C","D","H","S"],r=["A","J","Q","K"],l=[],a=document.querySelector("#pedir-carta"),n=document.querySelector("#detener"),d=document.querySelectorAll(".cartasJugador"),i=document.querySelector("#reiniciar"),s=document.querySelectorAll("span"),o=document.querySelector(".alerta");document.addEventListener("DOMContentLoaded",()=>{a.disabled=!0,n.disabled=!0});let c=(t=2)=>{e=$(),l=[],o.innerHTML="";for(let r=0;r<t;r++)l.push(0);s.forEach(e=>{e.textContent=0}),d.forEach(e=>{e.innerHTML=""}),a.disabled=!1,n.disabled=!1},$=()=>{e=[];for(let l=2;l<=10;l++)for(let a of t)e.push(l+a);for(let n of t)for(let d of r)e.push(d+n);return e=_.shuffle(e)},u=()=>{if(0===e.length){console.error("Ya no quedan cartas en el maso");return}let t=e[0];return e.shift(),t},f=e=>{let t=e.substring(0,e.length-1);return isNaN(t)&&"A"===t?11:isNaN(t)?10:parseInt(t)},E=e=>{a.disabled=!0;let t=document.createElement("P");t.classList.add("p-2","text-center","font-bold","text-2xl","mt-5","text-white"),"derrota"===e?(t.textContent="PERDISTE EL JUEGO",t.classList.add("bg-red-600")):"victoria"===e?(t.textContent="\xa1GANASTE EL JUEGO!",t.classList.add("bg-green-600")):(t.textContent="\xa1EMPATE!",t.classList.add("bg-blue-600")),o.appendChild(t)},b=(e,t)=>(l[t]+=f(e),s[t].textContent=l[t],l[t]),h=(e,t)=>{let r=document.createElement("IMG");r.className="w-24 mt-5 relative left-10 -ms-8",r.src=`cartas/${e}.png`,d[t].appendChild(r)},L=e=>{let t=0;do{let r=u();t=b(r,l.length-1),h(r,l.length-1)}while(t<e&&e<=21);if(t===e){E("empate");return}if(t>21&&e<21){E("victoria");return}if(21===t&&e<21){E("derrota");return}if(t>e&&t<21){E("derrota");return}},p=()=>{let e=u(),t=b(e,0);if(h(e,0),t>21){E("derrota"),n.disabled=!0,L(t);return}if(21===t){E("victoria"),n.disabled=!0,L(t);return}};a.addEventListener("click",p),n.addEventListener("click",()=>{a.disabled=!0,n.disabled=!0,L(l[0])}),i.addEventListener("click",()=>{c()})}();